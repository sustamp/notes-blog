---
layout: post-custom
title: 哈希算法笔记
---

## 1.什么是哈希
Hash也叫散列、哈希。原理是把**任意长度**的输入，通过哈希算法变成**固定长度**的输出。

这个映射的方法就是对应的Hash算法。而映射后得到的二进制串就是Hash值。

MD5、SHA1、SHA256、SHA512等都是Hash算法。

## 2.哈希的特点

1. Hash值**无法**反向**推导**出原始数据。
2. 输入数据的微小变化会得到完全不同的hash值。
3. 相同的输入会得到相同的输出。
4. hash算法的执行效率要**高效**，长文本也能快速地计算出Hash值。
5. hash算法的**冲突**概率**要小**。

> **抽屉原理**：桌上有10盒巧克力，要放到9个抽屉中。无论怎么放，至少有一个抽屉会放不少于2盒的巧克力。这个现象就是"抽屉原理"。  
> 抽屉原理又是也叫鸽巢原理，它是组合数学的一个重要原理。


## 3.哈希碰撞的解决方案
前面提到的抽屉原理，hash算法是有一定冲突的。

解决冲突的常用方法是：
- 链地址法
- 开放寻址法

### 3.1 链地址法
链地址法的处理处理逻辑如下：
- 使用一个**链表**数组，来**存储**数据。
- 当多个键值对映射到同一个哈希位置时（哈希冲突），这些键值对会被存储在同一个链表中。
- 每个链表的节点可以是一个键值对或指向下一个节点的指针。
  
优点：
- 实现简单，不会因为表的大小限制而导致性能下降。
  
缺点：
- 链表较长时，查询效率会降低。


### 3.2 开放寻址法
用大小为 M 的**数组**保存 N 个键值对，其中M > N。依靠数组中的**空位**解决哈希冲突。基于这种策略的所有方法被统称为**开放地址**哈希表。

常用的开放寻址法有：
- 线性探测
- 二次探测
- 双重哈希

#### 线性探测
从冲突位置开始，依次检查下一个位置，直到找到空位或查遍全表。

简单来说：**一旦发生冲突，就去寻找下一个空位，只要散列表足够大，空的散列地址总能找到**。

线性探测法的数学描述： 

`h(k, i) = (h(k, 0) + i) mod m`

- `i`: 表示当前进行的是第几轮探查。
  - i=1时，即是探查h(k, 0)的下一个；
  - i=2，即是再下一个。
- `mod m`: 到达了表的底下之后，回到顶端从头开始。



#### 二次探测
从冲突位置开始，以一定的步长（通常是平方数）进行探测，直到找到空位。

#### 双重哈希
使用两个哈希函数，第一个哈希函数确定初始位置，第二个哈希函数确定步长，直到找到空位。

开放寻址法的优点：
- 优点是数据都存储在哈希表中，不需要额外空间。
- 缺点是表的利用率较高时，插入和查找的效率会显著下降。




